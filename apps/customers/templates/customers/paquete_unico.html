{% extends 'customers/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/customers/paquete_detalle.css' %}">
{% endblock %}

{% block content %}
<div class="paquete-detalle-container">
  <div class="slider-container">
    <div class="slider">
      {% for imagen in paquete.imagenpaquete_set.all %}
        <div class="slide">
          <img src="{{ imagen.url_imagen }}" alt="Imagen del paquete">
        </div>
      {% endfor %}
    </div>
    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>
  </div>

  <div class="paquete-header">
    <div class="paquete-titulo-box">
      <h1 class="paquete-nombre">
        {{ paquete.nombre }}
      </h1>
    </div>

    <div class="paquete-info-grid">
        <div class="info-box blue">
            <div>
                ${{ paquete.precio_adulto }}
            </div>
            <div>
                P/ Persona
            </div>
        </div>
        <div class="info-box blue">
            <div>
                {{ paquete.minimo_personas }}-{{ paquete.maximo_personas }}
            </div>
            <div>
                Max Personas
            </div>
        </div>
        <div class="info-box blue">
            <div>
                {{ paquete.duracion_dias }}
            </div>
            <div>
                Días
            </div>
        </div>
        <div class="info-box green">
            <div id="btn-reservar" style="cursor: pointer;padding: 0.75rem !important;">
                <button href="#" class="reservar-btn">
                    <img src="{% static 'icons/calendar.svg'%}" alt="">
                </button>
            </div>
            <div>
                Reservar
            </div>
        </div>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active">Descripción</button>
    <button class="tab">Itinerario</button>
    <button class="tab">¿Qué incluye?</button>
    <button class="tab">FAQs</button>
    <button class="tab">Ubicaciones</button>
  </div>

  <div class="tab-content-boxes">
    <div class="tab-content active">
      <h2>Descripción</h2>
      <p>{{ paquete.descripcion|linebreaks }}</p>
    </div>
    <div class="tab-content">
      <h2>Itinerario</h2>
    </div>
    <div class="tab-content">
      <h2>¿Qué incluye?</h2>
      <ul>
        {% for amenidad in amenidades %}
          <li>{{ amenidad.nombre }}</li>
        {% empty %}
          <li>No hay amenidades disponibles para este paquete.</li>
        {% endfor %}
      </ul>
      <h3>Actividades</h3>
      <ul>
        {% for actividad in actividades %}
          <li>{{ actividad.nombre }}</li>
        {% endfor %}
      </ul>
      
    </div>
    <div class="tab-content">
      <h2>FAQs</h2>
      <p>Preguntas frecuentes sobre el paquete.</p>
    </div>
    <div class="tab-content">
      <h2>Ubicaciones</h2>
      <p>Tu paquete incluye acceso a las siguientes ubicaciones destacadas:</p>
      <ul>
        {% for ubicacion in ubicaciones %}
          <li>{{ ubicacion.nombre }}</li>
        {% endfor %}
      </ul>
      <p>A continuación, te mostramos un mapa de referencia para que puedas ubicarlas fácilmente:</p>      
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d472002.3568233719!2d-99.70485016493784!3d22.447145047423785!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x867f51ec0dedccaf%3A0x36d445ce8585a00b!2sEl%20Naranjo%2C%20S.L.P.!5e0!3m2!1ses-419!2smx!4v1746407939512!5m2!1ses-419!2smx" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </div>
  
</div>

{% include "customers/components/modal_reservacion.html" %}

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab');
    const contents = document.querySelectorAll('.tab-content');

    tabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
            // Activar pestaña
            tabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            // Mostrar contenido correspondiente
            contents.forEach(c => c.classList.remove('active'));
            contents[index].classList.add('active');
        });
    });

    // Modal abrir
    const btn = document.getElementById('btn-reservar');
    if (btn) {
        btn.addEventListener('click', () => {
            document.getElementById("modalReservacion").classList.remove("hidden");
        });
    }
});
</script>
<script src="{% static 'js/customers/slider.js' %}"></script>
{% endblock %}
